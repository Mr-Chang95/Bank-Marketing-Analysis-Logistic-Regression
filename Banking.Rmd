---
title: "Banking"
author: "Daniel Chang"
date: "2023-04-02"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Load Data and Packages
```{r banking}
library(tidyverse)
library(GGally)
library(skimr)
library(reshape2) 

banking = read.csv("bank-full.csv", stringsAsFactors = T)
head(banking)
```

## Exploratory Data Analysis(EDA)


```{r EDA, message = F}
skim(banking)

# Job Count
ggplot(banking, aes(x = job, fill = y)) +
  geom_bar() +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))

# Education Count
ggplot(banking, aes(x = education, fill = y)) +
  geom_bar() +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))

# Age Distribution
ggplot(banking, aes(x = age, fill = y)) +
  geom_histogram(bins = 50)

# Duration Distribution
ggplot(banking, aes(x = duration, fill = y)) +
  geom_histogram(bins = 50)

# Balance Distribution
ggplot(banking, aes(x = balance, fill = y)) +
  geom_histogram(bins = 20)

# Balance Boxplot
ggplot(banking, aes(x = balance, y =y, fill = y)) +
  geom_boxplot()
```

### Correlation Matrix
```{r}
# make new numeric column for "y" column
banking$y_num = num(ifelse(banking$y == "yes",1,0))

## Correlation map
num_cols = unlist(lapply(banking, is.numeric))
data_num = banking[ , num_cols] 
corr_mat <- round(cor(data_num),2)
 
# reduce the size of correlation matrix
melted_corr_mat <- melt(corr_mat)
# head(melted_corr_mat)
 
# plotting the correlation heatmap
ggplot(data = melted_corr_mat, aes(x=Var1, y=Var2,
                                   fill=value)) +
geom_tile() +
geom_text(aes(Var2, Var1, label = value),
          color = "white", size = 4) +
  ggtitle("Heatmap of Correalation For Numeric Variables")
```
